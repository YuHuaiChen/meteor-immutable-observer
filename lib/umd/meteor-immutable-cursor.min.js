!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],t):"object"==typeof exports?exports["meteor-immutable-cursor"]=t(require("immutable")):e["meteor-immutable-cursor"]=t(e.Immutable)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var u=n[o]={exports:{},id:o,loaded:!1};return e[o].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var u=n(2),r=o(u);t["default"]=r["default"],e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e){function t(e){var t=u;u=e,r.changed(),c.forEach(function(n){return n(e,t)}),n()}function n(){!a||r.hasDependents()||c.length||(a.stop(),a=void 0)}function o(){t(f["default"].fromJS(e.fetch())),a=e.observe({addedAt:function(e,n,o){t(u.splice(n,0,f["default"].fromJS(e)))},changedAt:function(e,n,o){t(u.update(o,function(t){return i["default"](t,f["default"].fromJS(e))}))},removedAt:function(e,n){t(u.splice(n,1))},movedTo:function(e,n,o,r){var f=u.get(n);t(u["delete"](n).splice(o,0,f))}})}var u=f["default"].fromJS(e.fetch()),r=new Tracker.Dependency,c=[],a=void 0;return{forEach:function(){var e;return r.depend()&&!a&&o(),(e=u).forEach.apply(e,arguments)},map:function(){var e;return r.depend()&&!a&&o(),(e=u).map.apply(e,arguments)},count:function(){return e.count()},fetch:function(){return r.depend()&&!a&&o(),u},observe:function(e){return a||o(),c.push(e),{stop:function(){var t=c.indexOf(e);t>=0&&(c.splice(t,1),n())}}}}}t.__esModule=!0,t["default"]=u;var r=n(1),f=o(r),c=n(3),i=o(c);e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){return e instanceof f["default"].Collection&&t instanceof f["default"].Collection&&Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e.withMutations(function(n){e.forEach(function(e,o){t.has(o)||n["delete"](o)}),t.forEach(function(t,o){e.has(o)?n.set(o,u(e.get(o),t)):n.set(o,t)})}):e===t?e:t}t.__esModule=!0,t["default"]=u;var r=n(1),f=o(r);e.exports=t["default"]}])});