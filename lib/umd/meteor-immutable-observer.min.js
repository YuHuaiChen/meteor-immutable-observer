!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],t):"object"==typeof exports?exports["meteor-immutable-observer"]=t(require("immutable")):e["meteor-immutable-observer"]=t(e.Immutable)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(2),i=o(r);t["default"]=i["default"],e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return e.withMutations(function(e){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];void 0===o?e["delete"](n):e.update(n,function(e){return c["default"](e,s["default"].fromJS(o))})}})}function i(e){function t(e){c=h=l=void 0,p.changed()}function n(e,t){return p.depend(),arguments.length>1?f.forEach(e,t):f.forEach(e)}function o(){return p.depend(),c||!function(){var e={};f.forEach(function(t,n){return e[n]=t}),c=s["default"].Seq(e)}(),c}function i(){return p.depend(),h||(h=o().toOrderedMap()),h}function u(){return p.depend(),l||(l=o().toList()),l}function a(){return f.size}var f=new d["default"],c=void 0,h=void 0,l=void 0,p=new Tracker.Dependency,v=!1,m=e.observeChanges({addedBefore:function(e,n,o){n._id=e,f.set(e,s["default"].fromJS(n),o),v&&t()},changed:function(e,n){f.set(e,r(f.get(e),n)),t()},movedBefore:function(e,n){f.move(e,n),t()},removed:function(e){f.remove(e),t()}});return v=!0,Tracker.active&&Tracker.onInvalidate(function(){m.stop()}),{forEach:n,count:a,documentSeq:o,documentMap:i,documentList:u,stop:function(){m.stop()}}}t.__esModule=!0,t["default"]=i;var u=n(1),s=o(u),a=n(3),d=o(a),f=n(4),c=o(f);e.exports=t["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=function(){function e(){n(this,e),this.nodes={},this.size=0}return e.prototype.get=function(e){return this.nodes.hasOwnProperty(e)?this.nodes[e].value:void 0},e.prototype.set=function(e,t,n){var o=void 0;if(void 0!==n?this.nodes.hasOwnProperty(n)?o=this.nodes[n]:n=void 0:o=this.head,this.nodes.hasOwnProperty(e))if(void 0!==n&&void 0!==o)this.remove(e);else{var r=this.nodes[e].oldValue;r!==t&&(this.nodes[e].value=t)}else if(this.size++,o){var i=o.prev,u=this.nodes[e]={key:e,value:t,prev:i,next:o};i.next=u,o.prev=u,o===this.head&&void 0!==n&&(this.head=u)}else this.head=this.nodes[e]={key:e,value:t},this.head.prev=this.head.next=this.head},e.prototype.remove=function(e){if(this.nodes.hasOwnProperty(e)){var t=this.nodes[e],n=t.prev,o=t.next,r=t.value;return t===this.head&&(1===this.size&&(n=o=void 0),this.head=o),n&&(n.next=o),o&&(o.prev=n),this.size--,r}},e.prototype.move=function(e,t){this.nodes.hasOwnProperty(e)&&this.nodes.hasOwnProperty(t)&&insert(e,remove(e),t)},e.prototype.forEach=function(e,t){var n=this.head,o=0;if(n)if(arguments.length>1){do{if(o++,e.call(t,n.value,n.key,this)===!1)return;n=n.next}while(n!==this.head)}else do{if(o++,e(n.value,n.key,this)===!1)return;n=n.next}while(n!==this.head);return o},e}();t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){return e instanceof u["default"].Collection&&t instanceof u["default"].Collection&&Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e.withMutations(function(n){e.forEach(function(e,o){t.has(o)||n["delete"](o)}),t.forEach(function(t,o){e.has(o)?n.set(o,r(e.get(o),t)):n.set(o,t)})}):e===t?e:t}t.__esModule=!0,t["default"]=r;var i=n(1),u=o(i);e.exports=t["default"]}])});